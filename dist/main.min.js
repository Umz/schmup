!function e(t,a,i){function n(o,r){if(!a[o]){if(!t[o]){var l="function"==typeof require&&require;if(!r&&l)return l(o,!0);if(s)return s(o,!0);var d=new Error("Cannot find module '"+o+"'");throw d.code="MODULE_NOT_FOUND",d}var c=a[o]={exports:{}};t[o][0].call(c.exports,function(e){var a=t[o][1][e];return n(a?a:e)},c,c.exports,e,t,a,i)}return a[o].exports}for(var s="function"==typeof require&&require,o=0;o<i.length;o++)n(i[o]);return n}({1:[function(e,t,a){"use strict";var i=new Phaser.Game(800,600,Phaser.AUTO,"schmup-game");window.Utils=e("./utils"),window.playerState={currentLevel:"Game"},i.state.add("Boot",e("./states/boot")),i.state.add("Splash",e("./states/splash")),i.state.add("Preloader",e("./states/preloader")),i.state.add("Menu",e("./states/menu")),i.state.add("Game",e("./states/game")),i.state.start("Boot")},{"./states/boot":2,"./states/game":3,"./states/menu":4,"./states/preloader":5,"./states/splash":6,"./utils":7}],2:[function(e,t,a){var i=function(){};t.exports=i,i.prototype={preload:function(){this.load.image("preloader","assets/preloader.gif")},create:function(){this.game.input.maxPointers=1,this.game.device.desktop?this.game.stage.scale.pageAlignHorizontally=!0:(this.game.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.game.scale.minWidth=800,this.game.scale.minHeight=600,this.game.scale.maxWidth=800,this.game.scale.maxHeight=600,this.game.scale.forceLandscape=!0,this.game.scale.pageAlignHorizontally=!0,this.game.scale.setScreenSize(!0)),this.game.state.start("Preloader")}}},{}],3:[function(e,t,a){"use strict";var i,n,s,o,r,l,d,c,h,u,m,p,f,g,y,x,b,v=0,A=0,S=2,T=25,E=T,B={acceleration:600,drag:350,maxSpeed:400},w={xSmall:.4,small:.5,medium:.75,large:1,xLarge:1.25,miniBoss:1.5,boss:2,greg:.55},P=function(){this.testentity=null};t.exports=P,P.prototype={create:function(){function e(){i=W.add.sprite(400,500,"ship"),W.physics.arcade.enable(i),i.events.onKilled.add(function(){b.kill()}),i.body.maxVelocity.setTo(B.maxSpeed,B.maxSpeed),i.body.drag.setTo(B.drag,B.drag),i.anchor.setTo(.5,.5),i.health=100,i.size=w.greg,W.createShipTrail(i,"plasma")}function t(){y=W.input.keyboard.createCursorKeys(),x=W.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR)}function a(){l=W.add.group(),d=W.add.group(),c=W.add.group(),r=[l,d,c];var e=function(){function e(){return i&&a.alive&&a.bullets&&A>a.firingSpeed+a.lastShot}function t(){return W.randomIntegerFrom(1,100)>80}var a=this,i=a.weapon.getFirstExists(!1);e()&&t()&&(a.lastShot=A,a.bullets--,i.reset(a.x+a.width/2,a.y+.75*a.height),i.damageAmount=a.bulletDamageAmount,i.body.velocity.y=a.bulletSpeed,i.body.velocity.x=0,i.body.drag=0,i.body.angle=90)};l.init=function(){this.createMultiple(50,"droneScout"),this.minWaveTiming=140,this.maxWaveTiming=380,this.minWaveNumber=3,this.maxWaveNumber=5,this.forEach(function(e){e.damageAmount=10,e.level=2,e.speed=W.randomIntegerFrom(250,450),e.drift=30,e.drag=W.randomIntegerFrom(100,200),e.minX=50,e.maxX=750,e.scale.x=w.xSmall,e.scale.y=w.xSmall})},d.init=function(){this.createMultiple(15,"droneFighter"),this.minWaveTiming=190,this.maxWaveTiming=500,this.minWaveNumber=2,this.maxWaveNumber=4,this.scoreThreshold=1e3,this.forEach(function(t){t.damageAmount=25,t.level=3,t.speed=W.randomIntegerFrom(250,400),t.drift=W.randomIntegerFrom(200,450),t.drag=50,t.minX=100,t.maxX=700,t.scale.x=w.medium,t.scale.y=w.medium,t.weapon=f,t.bullets=4,t.bulletDamageAmount=10,t.bulletSpeed=500,t.firingSpeed=20,t.lastShot=0,t.update=e})},c.init=function(){this.createMultiple(5,"droneBomber"),this.minWaveTiming=500,this.maxWaveTiming=600,this.minWaveNumber=0,this.maxWaveNumber=1,this.forEach(function(t){t.damageAmount=50,t.level=4,t.speed=100,t.drift=5,t.drag=5,t.minX=250,t.maxX=650,t.scale.x=w.large,t.scale.y=w.large,t.weapon=g,t.bullets=2,t.bulletDamageAmount=40,t.bulletSpeed=250,t.firingSpeed=40,t.lastShot=0,t.update=e})},r.forEach(function(e){S(e),e.init()}),W.launchEnemies(W.randomIntegerFrom(3,5),l)}function S(e){e.physicsBodyType=Phaser.Physics.ARCADE,e.enableBody=!0,e.setAll("anchor.x",.5),e.setAll("anchor.y",.5),e.setAll("angle",180),e.setAll("outOfBoundsKill",!0),e.setAll("checkWorldBounds",!0)}function T(){m=W.add.group(),m.enableBody=!0,m.physicsBodyType=Phaser.Physics.ARCADE,m.createMultiple(15,"bullet"),m.setAll("anchor.x",.5),m.setAll("anchor.y",1),m.setAll("outOfBoundsKill",!0),m.setAll("checkWorldBounds",!0),f=W.add.group(),f.enableBody=!0,f.physicsBodyType=Phaser.Physics.ARCADE,f.createMultiple(20,"enemyLaser"),f.setAll("scale.x",.6),f.setAll("scale.y",.6),f.setAll("anchor.x",.5),f.setAll("anchor.y",.5),f.setAll("outOfBoundsKill",!0),f.setAll("checkWorldBounds",!0),g=W.add.group(),g.enableBody=!0,g.physicsBodyType=Phaser.Physics.ARCADE,g.createMultiple(10,"enemyBomb"),g.setAll("scale.x",.75),g.setAll("scale.y",.75),g.setAll("anchor.x",.5),g.setAll("anchor.y",.5),g.setAll("outOfBoundsKill",!0),g.setAll("checkWorldBounds",!0),p=[f,g]}function E(){u=W.add.group(),u.enableBody=!0,u.physicsBodyType=Phaser.Physics.ARCADE,u.createMultiple(30,"explosion"),u.setAll("anchor.x",.5),u.setAll("anchor.y",.5),u.forEach(function(e){e.animations.add("explosion")})}function P(){function e(){n=W.add.bitmapText(W.world.width-250,10,"spacefont",""+i.health+"%",20),n.render=function(){n.text="Shields: "+Math.max(i.health,0)+"%"}}function t(){o=W.add.bitmapText(10,10,"spacefont","",20),o.render=function(){o.text="Score: "+v}}function a(){s=W.add.bitmapText(W.world.centerX,W.world.centerY,"spacefont","GREG OVER!",50),s.x=s.x-s.textWidth/2,s.y=s.y-s.textHeight/3,s.visible=!1}e(),t(),a(),n.render(),o.render()}var W=this;h=W.add.tileSprite(0,0,800,600,"starfield"),e(),t(),T(),a(),E(),P()},update:function(){function e(){A>1e3?A=0:A++}function t(){function e(){y.left.isDown?i.body.acceleration.x=-B.acceleration:y.right.isDown&&(i.body.acceleration.x=B.acceleration),i.alive&&x.isDown&&d()}i.body.acceleration.x=0,W.checkForBounds(50,750,i),e(),b.x=i.x,W.applyBankingToShip(i)}function a(){function e(){function e(){t.detach(),a.detach(),W.restart()}var t=W.input.onTap.addOnce(e,W),a=x.onDown.addOnce(e,W)}if(!i.alive&&0==s.visible){s.visible=!0,s.alpha=0;var t=W.add.tween(s);t.to({alpha:1},1e3,Phaser.Easing.Quintic.Out),t.onComplete.add(e),t.start()}}function l(){r.forEach(function(e){W.physics.arcade.overlap(i,e,c,null,W),W.physics.arcade.overlap(m,e,g,null,W)}),p.forEach(function(e){W.physics.arcade.overlap(e,i,f,null,this)})}function d(){var e=m.getFirstExists(!1);E>T&&(E=0,e&&(e.reset(i.x,i.y-25),e.body.velocity.y=-200,e.body.velocity.x+=i.body.velocity.x/5)),E++}function c(e,t){var a=u.getFirstExists(!1);a.reset(t.body.x+t.body.halfWidth,t.body.y+t.body.halfHeight),a.body.velocity.y=t.body.velocity.y,a.alpha=.7,a.play("explosion",30,!1,!0),t.kill(),e.damage(t.damageAmount),n.render(),P(t)}function f(e,t){w(e),t.kill(),e.damage(t.damageAmount),n.render()}function g(e,t){w(t),t.kill(),e.kill(),P(t)}function w(e){var t=u.getFirstExists(!1);t.reset(e.body.x+e.body.halfWidth,e.body.y+e.body.halfHeight),t.body.velocity.y=e.body.velocity.y,t.alpha=.7,t.play("explosion",30,!1,!0)}function P(e){v+=e.damageAmount*e.level,o.render()}var W=this;h.tilePosition.y+=S,e(),r.forEach(function(e){function t(e){function t(e){return 10*Math.ceil(e/10)}e.waveTimer||(e.waveTimer=t(W.randomIntegerFrom(e.minWaveTiming,e.maxWaveTiming)))}function a(e){A%e.waveTimer===0&&(W.launchEnemies(W.randomIntegerFrom(e.minWaveNumber,e.maxWaveNumber),e),e.waveTimer=null)}var i=e.scoreThreshold||0;v>i&&(t(e),a(e))}),l(),a(),t()},launchEnemies:function(e,t){function a(){var e=t.getFirstExists(!1);if(e){var a=i.randomIntegerFrom(e.minX,e.maxX);e.reset(a,-20),e.body.velocity.x=i.randomIntegerFrom(-e.drift,e.drift),e.body.velocity.y=e.speed,e.body.drag.x=e.drag}}for(var i=this,n=0;e>n;n++)a()},setEnemyAttributes:function(e,t){t=t||{},game.physics.enable(e,Phaser.Physics.ARCADE);for(attr in t)e[attr]=t[attr]},checkForBounds:function(e,t,a){a.x>t&&(a.x=t,a.body.acceleration.x=-50),a.x<e&&(a.x=e,a.body.acceleration.x=50)},applyBankingToShip:function(e){var t=e.body.velocity.x/B.maxSpeed;e.scale.x=e.size-Math.abs(t)/4,e.angle=5*t},createShipTrail:function(e,t){b=this.add.emitter(e.x,e.y+40,400),b.width=10,b.makeParticles(t),b.setXSpeed(30,-30),b.setYSpeed(200,180),b.setRotation(50,-50),b.setAlpha(1,.01,800),b.setScale(.05,.4,.05,.4,2e3,Phaser.Easing.Quintic.Out),b.start(!1,5e3,10)},restart:function(){r.forEach(function(e){e.callAll("kill")}),p.forEach(function(e){e.callAll("kill")}),A=0,i.revive(),i.health=100,n.render(),v=0,o.render(),s.visible=!1},randomIntegerFrom:function(e,t){return Math.floor(Math.random()*(t-e)+e+1)},onInputDown:function(){this.game.state.start("Menu")}}},{}],4:[function(e,t,a){var i=function(){this.text=null,this.subtitle=null};t.exports=i,i.prototype={create:function(){var e=this.game.width/2,t=this.game.height/2;this.text=this.add.bitmapText(e-300,t-200,"spacefont","Click to Greg",50),this.subtitle=this.add.bitmapText(e-300,t-100,"spacefont","Arrow keys to move, Space to fire",20),this.input.onDown.add(this.onDown,this)},update:function(){},onDown:function(){this.game.state.start(playerState.currentLevel)}}},{}],5:[function(e,t,a){var i=function(e){this.asset=null,this.ready=!1};t.exports=i,i.prototype={preload:function(){this.asset=this.add.sprite(320,240,"preloader"),this.asset.anchor.setTo(.5,.5),this.physics.startSystem(Phaser.Physics.ARCADE),this.load.onLoadComplete.addOnce(this.onLoadComplete,this),this.load.setPreloadSprite(this.asset),this.load.image("starfield","assets/starfield.png"),this.load.image("ship","assets/gregHead.png"),this.load.image("plasma","assets/bluePlasma.png"),this.load.image("laser","assets/blueLaser.png"),this.load.image("bullet","assets/blueBullet.png"),this.load.image("enemyLaser","assets/redLaser.png"),this.load.image("enemyBomb","assets/redBomb.png"),this.load.image("droneScout","assets/droneScout.png"),this.load.image("droneFighter","assets/droneFighter.png"),this.load.image("droneBomber","assets/droneBomber.png"),this.load.image("enemyTrail","assets/enemyTrail.png"),this.load.spritesheet("explosion","assets/explosion.png",128,128),this.load.bitmapFont("spacefont","assets/spacefont/spacefont.png","assets/spacefont/spacefont.fnt")},create:function(){this.asset.cropEnabled=!1},update:function(){this.ready&&this.game.state.start("Menu")},onLoadComplete:function(){this.ready=!0}}},{}],6:[function(e,t,a){var i=function(){};t.exports=i,i.prototype={create:function(){}}},{}],7:[function(e,t,a){var i={containsObject:function(e,t){var a;for(a=0;a<t.length;a++)if(t[a]===e)return!0;return!1}};t.exports=i},{}]},{},[1]);