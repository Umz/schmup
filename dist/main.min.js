(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({"/Users/seanodonohue/myProjects/schmup-prototype/src/js/main.js":[function(require,module,exports){
'use strict';

var game = new Phaser.Game(800, 600, Phaser.AUTO, 'schmup-game');

var width = 800;
var height = 600;

window.Utils = require('./utils');
window.playerState = {
    currentLevel: 'Game'
}



game.state.add('Boot', require('./states/boot'));
game.state.add('Splash', require('./states/splash'));
game.state.add('Preloader', require('./states/preloader'));
game.state.add('Menu', require('./states/menu'));
game.state.add('Game', require('./states/game'));

game.state.start('Boot');

},{"./states/boot":"/Users/seanodonohue/myProjects/schmup-prototype/src/js/states/boot.js","./states/game":"/Users/seanodonohue/myProjects/schmup-prototype/src/js/states/game.js","./states/menu":"/Users/seanodonohue/myProjects/schmup-prototype/src/js/states/menu.js","./states/preloader":"/Users/seanodonohue/myProjects/schmup-prototype/src/js/states/preloader.js","./states/splash":"/Users/seanodonohue/myProjects/schmup-prototype/src/js/states/splash.js","./utils":"/Users/seanodonohue/myProjects/schmup-prototype/src/js/utils.js"}],"/Users/seanodonohue/myProjects/schmup-prototype/src/js/states/boot.js":[function(require,module,exports){
var Boot = function () {};

module.exports = Boot;

Boot.prototype = {

  preload: function () {
    this.load.image('preloader', 'assets/preloader.gif');
  },

  create: function () {
    this.game.input.maxPointers = 1;

    if (this.game.device.desktop) {
      this.game.stage.scale.pageAlignHorizontally = true;
    } else {
      this.game.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL;
      this.game.scale.minWidth =  800;
      this.game.scale.minHeight = 600;
      this.game.scale.maxWidth = 800;
      this.game.scale.maxHeight = 600;
      this.game.scale.forceLandscape = true;
      this.game.scale.pageAlignHorizontally = true;
      this.game.scale.setScreenSize(true);
    }

    this.game.state.start('Preloader');
  }
};

},{}],"/Users/seanodonohue/myProjects/schmup-prototype/src/js/states/game.js":[function(require,module,exports){
var player;
var starfield;

var explosions;
var bullets;
// var bulletTimer = 0;
var firingSpeed = 3;
var bulletCounter = firingSpeed;

var cursors;
var fireButton;

var ship = {
  'acceleration': 600,
  'drag': 350,
  'maxSpeed': 400
}


console.log(this);
 // TODO: change everywhere for readability and to maintain scope. game = this

var Game = function() {
  this.testentity = null;
};

module.exports = Game;

Game.prototype = {

  create: function() {

    //  The scrolling starfield background
    starfield = this.add.tileSprite(0, 0, 800, 600, 'starfield');

    // Enemies -- Drones
    droneScouts = this.add.group();
    droneScouts.enableBody = true;
    droneScouts.physicsBodyType = Phaser.Physics.ARCADE;
    droneScouts.createMultiple(5, 'droneScout');
    droneScouts.setAll('anchor.x', 0.5);
    droneScouts.setAll('anchor.y', 0.5);
    droneScouts.setAll('angle', 180);
    droneScouts.setAll('outOfBoundsKill', true);
    droneScouts.setAll('checkWorldBounds', true);

    // Broken enemy trail emitter code

    // droneScouts.forEach(function(enemy) {
    //   addEnemyEmitterTrail(enemy);
    //   enemy.events.onKilled.add(function() {
    //     enemy.trail.kill();
    //   });
    // });
    // function addEnemyEmitterTrail(enemy) {
    //     var enemyTrail = droneScouts.game.add.emitter(enemy.x, enemy.y - 25, 100);
    //     enemyTrail.width = 10;
    //     enemyTrail.makeParticles('enemyTrail', [1, 2, 3, 4, 5]);
    //     enemyTrail.setXSpeed(20, -20);
    //     enemyTrail.setRotation(50, -50);
    //     enemyTrail.setAlpha(0.4, 0, 800);
    //     enemyTrail.setScale(0.01, 0.1, 0.01, 0.1, 1000, Phaser.Easing.Quintic.Out);
    //     enemy.trail = enemyTrail;
    //   }

    launchDroneScouts(randomIntegerFrom(3, 7));

    // The bullet group
    bullets = this.add.group();
    bullets.enableBody = true;
    bullets.physicsBodyType = Phaser.Physics.ARCADE;
    bullets.createMultiple(30, 'bullet');
    bullets.setAll('anchor.x', 0.5);
    bullets.setAll('anchor.y', 1);
    bullets.setAll('outOfBoundsKill', true);
    bullets.setAll('checkWorldBounds', true);

    // Explosion group
    explosions = this.add.group();
   explosions.enableBody = true;
   explosions.physicsBodyType = Phaser.Physics.ARCADE;
   explosions.createMultiple(30, 'explosion');
   explosions.setAll('anchor.x', 0.5);
   explosions.setAll('anchor.y', 0.5);
   explosions.forEach( function(explosion) {
       explosion.animations.add('explosion');
   });

    // The player's ship
    player = this.add.sprite(400, 500, 'ship');
    this.physics.arcade.enable(player);

    // Set ship physics
    player.body
      .maxVelocity.setTo(ship.maxSpeed, ship.maxSpeed);
    player.body
      .drag.setTo(ship.drag, ship.drag);
    player.anchor.setTo(0.5, 0.5);

    // Set ship trail emitter
    shipTrail = this.add.emitter(player.x, player.y + 40, 400);
    shipTrail.width = 10;
    shipTrail.makeParticles('plasma');
    shipTrail.setXSpeed(30, -30);
    shipTrail.setYSpeed(200, 180);
    shipTrail.setRotation(50, -50);
    shipTrail.setAlpha(1, 0.01, 800);
    shipTrail.setScale(0.05, 0.4, 0.05, 0.4, 2000, Phaser.Easing.Quintic.Out);
    shipTrail.start(false, 5000, 10);

    // Set controls
    cursors = this.input.keyboard.createCursorKeys();
    fireButton = this.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR);

    function randomIntegerFrom(min, max) {
      return Math.floor(Math.random() * (max - min) + min + 1);
    }

    function launchDroneScouts(quantity) {
      for (var i = 0; i < quantity; i++) {
        launchDroneScout();
      }
    }

    // Enemy creation functions
    function launchDroneScout() {
      var minSpacing = 300;
      var maxSpacing = 3000;
      var enemySpeed = 300;

      var enemy = droneScouts.getFirstExists(false);
      if (enemy) {
        enemy.reset(randomIntegerFrom(0, 600), -20);
        enemy.body.velocity.x = randomIntegerFrom(-300, 300);
        enemy.body.velocity.y = enemySpeed;
        enemy.body.drag.x = 100;
        
        // More broken enemy trail code.
        // enemy.trail.start(false, 800, 1);

        enemy.update = function() {
          // enemy.trail.x = enemy.x;
          // enemy.trail.y = enemy.y - 10;
        }
      }
    }

  },

  update: function() {
    starfield.tilePosition.y += 2;

    this.physics.arcade.overlap(player, droneScouts, shipCollide, null, this);
    this.physics.arcade.overlap(bullets, droneScouts, shipCollide, null, this);

    player.body.acceleration.x = 0;

    if (cursors.left.isDown) {
      player.body.acceleration.x = -ship.acceleration;
    } else if (cursors.right.isDown) {
      player.body.acceleration.x = ship.acceleration;
    }

    if (fireButton.isDown) {
      fireBullet();
    }

    // TODO: Refactor to be DRY
    if (player.x > 750) {
      player.x = 750;
      player.body.acceleration.x = 0;
    }
    if (player.x < 50) {
      player.x = 50;
      player.body.acceleration.x = 0;
    }

    // Ship banking logic
    // TODO: put this in the ship object
    bank = player.body.velocity.x / ship.maxSpeed;
    player.scale.x = 1 - Math.abs(bank) / 4;
    player.angle = bank * 5;

    shipTrail.x = player.x;

    function fireBullet() {


      var bullet = bullets.getFirstExists(false);
      var bulletSpeed = 400;

      if (bulletCounter > firingSpeed) {

        bulletCounter = 0;

        // Bullet physics
        if (bullet) {
          bullet.reset(player.x, player.y - 25);

          bullet.body.velocity.y = -200;
          bullet.body.velocity.x += player.body.velocity.x / 5;
          console.log("Firing attempt");
          // Firing speed logic
          // bulletTimer = Game.time.now += firingDelay;
        }
      }
      bulletCounter++;
    }

    function shipCollide(player, enemy){
      var explosion = explosions.getFirstExists(false);
      explosion.reset(enemy.body.x + enemy.body.halfWidth, enemy.body.y + enemy.body.halfHeight);
      explosion.body.velocity.y = enemy.body.velocity.y;
      explosion.alpha = 0.7;
      explosion.play('explosion', 30, false, true);
      enemy.kill();
    }

  },

  onInputDown: function() {
    this.game.state.start('Menu');
  }
};
},{}],"/Users/seanodonohue/myProjects/schmup-prototype/src/js/states/menu.js":[function(require,module,exports){
var Menu = function () {
  this.text = null;
};

module.exports = Menu;

Menu.prototype = {

  create: function () {
    var x = this.game.width / 2;
    var y = this.game.height / 2;

    var style = { font: "65px Arial", fill: "#ffffff", align: "center" };

    this.text = this.add.text(x - 300, y - 200, "Press to Start", style);

    this.input.onDown.add(this.onDown, this);
  },

  update: function () {
  },

  onDown: function () {
    this.game.state.start(playerState.currentLevel);
  }
};

},{}],"/Users/seanodonohue/myProjects/schmup-prototype/src/js/states/preloader.js":[function(require,module,exports){
var Preloader = function (game) {
  this.asset = null;
  this.ready = false;
};

module.exports = Preloader;


Preloader.prototype = {

  preload: function () {
    this.asset = this.add.sprite(320, 240, 'preloader');
    this.asset.anchor.setTo(0.5, 0.5);

    this.physics.startSystem(Phaser.Physics.ARCADE);

    this.load.onLoadComplete.addOnce(this.onLoadComplete, this);
    this.load.setPreloadSprite(this.asset);
    this.load.image('starfield', 'assets/starfield.png');
    this.load.image('ship', 'assets/player.png');
    this.load.image('plasma', 'assets/bluePlasma.png');
    this.load.image('laser', 'assets/blueLaser.png');
    this.load.image('bullet', 'assets/blueBullet.png');
    this.load.image('droneScout', 'assets/droneScout.png');
    this.load.image('enemyTrail', 'assets/enemyTrail.png');
    this.load.spritesheet('explosion', 'assets/explosion.png', 128, 128);
  },

  create: function () {
    this.asset.cropEnabled = false;
  },

  update: function () {
    if (!!this.ready) {
      this.game.state.start('Menu');
    }
  },

  onLoadComplete: function () {
    this.ready = true;
  }
};

},{}],"/Users/seanodonohue/myProjects/schmup-prototype/src/js/states/splash.js":[function(require,module,exports){
var Splash = function () {
};

module.exports = Splash;

Splash.prototype = {
  create: function () {
  }
};
},{}],"/Users/seanodonohue/myProjects/schmup-prototype/src/js/utils.js":[function(require,module,exports){
var Utils = {
    containsObject: function(obj, list) {
        var i;
        for (i = 0; i < list.length; i++) {
            if (list[i] === obj) {
                return true;
            }
        }

        return false;
    }
};

module.exports = Utils;
},{}]},{},["/Users/seanodonohue/myProjects/schmup-prototype/src/js/main.js"])
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvbWFpbi5qcyIsInNyYy9qcy9zdGF0ZXMvYm9vdC5qcyIsInNyYy9qcy9zdGF0ZXMvZ2FtZS5qcyIsInNyYy9qcy9zdGF0ZXMvbWVudS5qcyIsInNyYy9qcy9zdGF0ZXMvcHJlbG9hZGVyLmpzIiwic3JjL2pzL3N0YXRlcy9zcGxhc2guanMiLCJzcmMvanMvdXRpbHMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9OQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIndXNlIHN0cmljdCc7XG5cbnZhciBnYW1lID0gbmV3IFBoYXNlci5HYW1lKDgwMCwgNjAwLCBQaGFzZXIuQVVUTywgJ3NjaG11cC1nYW1lJyk7XG5cbnZhciB3aWR0aCA9IDgwMDtcbnZhciBoZWlnaHQgPSA2MDA7XG5cbndpbmRvdy5VdGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcbndpbmRvdy5wbGF5ZXJTdGF0ZSA9IHtcbiAgICBjdXJyZW50TGV2ZWw6ICdHYW1lJ1xufVxuXG5cblxuZ2FtZS5zdGF0ZS5hZGQoJ0Jvb3QnLCByZXF1aXJlKCcuL3N0YXRlcy9ib290JykpO1xuZ2FtZS5zdGF0ZS5hZGQoJ1NwbGFzaCcsIHJlcXVpcmUoJy4vc3RhdGVzL3NwbGFzaCcpKTtcbmdhbWUuc3RhdGUuYWRkKCdQcmVsb2FkZXInLCByZXF1aXJlKCcuL3N0YXRlcy9wcmVsb2FkZXInKSk7XG5nYW1lLnN0YXRlLmFkZCgnTWVudScsIHJlcXVpcmUoJy4vc3RhdGVzL21lbnUnKSk7XG5nYW1lLnN0YXRlLmFkZCgnR2FtZScsIHJlcXVpcmUoJy4vc3RhdGVzL2dhbWUnKSk7XG5cbmdhbWUuc3RhdGUuc3RhcnQoJ0Jvb3QnKTtcbiIsInZhciBCb290ID0gZnVuY3Rpb24gKCkge307XG5cbm1vZHVsZS5leHBvcnRzID0gQm9vdDtcblxuQm9vdC5wcm90b3R5cGUgPSB7XG5cbiAgcHJlbG9hZDogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMubG9hZC5pbWFnZSgncHJlbG9hZGVyJywgJ2Fzc2V0cy9wcmVsb2FkZXIuZ2lmJyk7XG4gIH0sXG5cbiAgY3JlYXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5nYW1lLmlucHV0Lm1heFBvaW50ZXJzID0gMTtcblxuICAgIGlmICh0aGlzLmdhbWUuZGV2aWNlLmRlc2t0b3ApIHtcbiAgICAgIHRoaXMuZ2FtZS5zdGFnZS5zY2FsZS5wYWdlQWxpZ25Ib3Jpem9udGFsbHkgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmdhbWUuc2NhbGUuc2NhbGVNb2RlID0gUGhhc2VyLlNjYWxlTWFuYWdlci5TSE9XX0FMTDtcbiAgICAgIHRoaXMuZ2FtZS5zY2FsZS5taW5XaWR0aCA9ICA4MDA7XG4gICAgICB0aGlzLmdhbWUuc2NhbGUubWluSGVpZ2h0ID0gNjAwO1xuICAgICAgdGhpcy5nYW1lLnNjYWxlLm1heFdpZHRoID0gODAwO1xuICAgICAgdGhpcy5nYW1lLnNjYWxlLm1heEhlaWdodCA9IDYwMDtcbiAgICAgIHRoaXMuZ2FtZS5zY2FsZS5mb3JjZUxhbmRzY2FwZSA9IHRydWU7XG4gICAgICB0aGlzLmdhbWUuc2NhbGUucGFnZUFsaWduSG9yaXpvbnRhbGx5ID0gdHJ1ZTtcbiAgICAgIHRoaXMuZ2FtZS5zY2FsZS5zZXRTY3JlZW5TaXplKHRydWUpO1xuICAgIH1cblxuICAgIHRoaXMuZ2FtZS5zdGF0ZS5zdGFydCgnUHJlbG9hZGVyJyk7XG4gIH1cbn07XG4iLCJ2YXIgcGxheWVyO1xudmFyIHN0YXJmaWVsZDtcblxudmFyIGV4cGxvc2lvbnM7XG52YXIgYnVsbGV0cztcbi8vIHZhciBidWxsZXRUaW1lciA9IDA7XG52YXIgZmlyaW5nU3BlZWQgPSAzO1xudmFyIGJ1bGxldENvdW50ZXIgPSBmaXJpbmdTcGVlZDtcblxudmFyIGN1cnNvcnM7XG52YXIgZmlyZUJ1dHRvbjtcblxudmFyIHNoaXAgPSB7XG4gICdhY2NlbGVyYXRpb24nOiA2MDAsXG4gICdkcmFnJzogMzUwLFxuICAnbWF4U3BlZWQnOiA0MDBcbn1cblxuXG5jb25zb2xlLmxvZyh0aGlzKTtcbiAvLyBUT0RPOiBjaGFuZ2UgZXZlcnl3aGVyZSBmb3IgcmVhZGFiaWxpdHkgYW5kIHRvIG1haW50YWluIHNjb3BlLiBnYW1lID0gdGhpc1xuXG52YXIgR2FtZSA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLnRlc3RlbnRpdHkgPSBudWxsO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBHYW1lO1xuXG5HYW1lLnByb3RvdHlwZSA9IHtcblxuICBjcmVhdGU6IGZ1bmN0aW9uKCkge1xuXG4gICAgLy8gIFRoZSBzY3JvbGxpbmcgc3RhcmZpZWxkIGJhY2tncm91bmRcbiAgICBzdGFyZmllbGQgPSB0aGlzLmFkZC50aWxlU3ByaXRlKDAsIDAsIDgwMCwgNjAwLCAnc3RhcmZpZWxkJyk7XG5cbiAgICAvLyBFbmVtaWVzIC0tIERyb25lc1xuICAgIGRyb25lU2NvdXRzID0gdGhpcy5hZGQuZ3JvdXAoKTtcbiAgICBkcm9uZVNjb3V0cy5lbmFibGVCb2R5ID0gdHJ1ZTtcbiAgICBkcm9uZVNjb3V0cy5waHlzaWNzQm9keVR5cGUgPSBQaGFzZXIuUGh5c2ljcy5BUkNBREU7XG4gICAgZHJvbmVTY291dHMuY3JlYXRlTXVsdGlwbGUoNSwgJ2Ryb25lU2NvdXQnKTtcbiAgICBkcm9uZVNjb3V0cy5zZXRBbGwoJ2FuY2hvci54JywgMC41KTtcbiAgICBkcm9uZVNjb3V0cy5zZXRBbGwoJ2FuY2hvci55JywgMC41KTtcbiAgICBkcm9uZVNjb3V0cy5zZXRBbGwoJ2FuZ2xlJywgMTgwKTtcbiAgICBkcm9uZVNjb3V0cy5zZXRBbGwoJ291dE9mQm91bmRzS2lsbCcsIHRydWUpO1xuICAgIGRyb25lU2NvdXRzLnNldEFsbCgnY2hlY2tXb3JsZEJvdW5kcycsIHRydWUpO1xuXG4gICAgLy8gQnJva2VuIGVuZW15IHRyYWlsIGVtaXR0ZXIgY29kZVxuXG4gICAgLy8gZHJvbmVTY291dHMuZm9yRWFjaChmdW5jdGlvbihlbmVteSkge1xuICAgIC8vICAgYWRkRW5lbXlFbWl0dGVyVHJhaWwoZW5lbXkpO1xuICAgIC8vICAgZW5lbXkuZXZlbnRzLm9uS2lsbGVkLmFkZChmdW5jdGlvbigpIHtcbiAgICAvLyAgICAgZW5lbXkudHJhaWwua2lsbCgpO1xuICAgIC8vICAgfSk7XG4gICAgLy8gfSk7XG4gICAgLy8gZnVuY3Rpb24gYWRkRW5lbXlFbWl0dGVyVHJhaWwoZW5lbXkpIHtcbiAgICAvLyAgICAgdmFyIGVuZW15VHJhaWwgPSBkcm9uZVNjb3V0cy5nYW1lLmFkZC5lbWl0dGVyKGVuZW15LngsIGVuZW15LnkgLSAyNSwgMTAwKTtcbiAgICAvLyAgICAgZW5lbXlUcmFpbC53aWR0aCA9IDEwO1xuICAgIC8vICAgICBlbmVteVRyYWlsLm1ha2VQYXJ0aWNsZXMoJ2VuZW15VHJhaWwnLCBbMSwgMiwgMywgNCwgNV0pO1xuICAgIC8vICAgICBlbmVteVRyYWlsLnNldFhTcGVlZCgyMCwgLTIwKTtcbiAgICAvLyAgICAgZW5lbXlUcmFpbC5zZXRSb3RhdGlvbig1MCwgLTUwKTtcbiAgICAvLyAgICAgZW5lbXlUcmFpbC5zZXRBbHBoYSgwLjQsIDAsIDgwMCk7XG4gICAgLy8gICAgIGVuZW15VHJhaWwuc2V0U2NhbGUoMC4wMSwgMC4xLCAwLjAxLCAwLjEsIDEwMDAsIFBoYXNlci5FYXNpbmcuUXVpbnRpYy5PdXQpO1xuICAgIC8vICAgICBlbmVteS50cmFpbCA9IGVuZW15VHJhaWw7XG4gICAgLy8gICB9XG5cbiAgICBsYXVuY2hEcm9uZVNjb3V0cyhyYW5kb21JbnRlZ2VyRnJvbSgzLCA3KSk7XG5cbiAgICAvLyBUaGUgYnVsbGV0IGdyb3VwXG4gICAgYnVsbGV0cyA9IHRoaXMuYWRkLmdyb3VwKCk7XG4gICAgYnVsbGV0cy5lbmFibGVCb2R5ID0gdHJ1ZTtcbiAgICBidWxsZXRzLnBoeXNpY3NCb2R5VHlwZSA9IFBoYXNlci5QaHlzaWNzLkFSQ0FERTtcbiAgICBidWxsZXRzLmNyZWF0ZU11bHRpcGxlKDMwLCAnYnVsbGV0Jyk7XG4gICAgYnVsbGV0cy5zZXRBbGwoJ2FuY2hvci54JywgMC41KTtcbiAgICBidWxsZXRzLnNldEFsbCgnYW5jaG9yLnknLCAxKTtcbiAgICBidWxsZXRzLnNldEFsbCgnb3V0T2ZCb3VuZHNLaWxsJywgdHJ1ZSk7XG4gICAgYnVsbGV0cy5zZXRBbGwoJ2NoZWNrV29ybGRCb3VuZHMnLCB0cnVlKTtcblxuICAgIC8vIEV4cGxvc2lvbiBncm91cFxuICAgIGV4cGxvc2lvbnMgPSB0aGlzLmFkZC5ncm91cCgpO1xuICAgZXhwbG9zaW9ucy5lbmFibGVCb2R5ID0gdHJ1ZTtcbiAgIGV4cGxvc2lvbnMucGh5c2ljc0JvZHlUeXBlID0gUGhhc2VyLlBoeXNpY3MuQVJDQURFO1xuICAgZXhwbG9zaW9ucy5jcmVhdGVNdWx0aXBsZSgzMCwgJ2V4cGxvc2lvbicpO1xuICAgZXhwbG9zaW9ucy5zZXRBbGwoJ2FuY2hvci54JywgMC41KTtcbiAgIGV4cGxvc2lvbnMuc2V0QWxsKCdhbmNob3IueScsIDAuNSk7XG4gICBleHBsb3Npb25zLmZvckVhY2goIGZ1bmN0aW9uKGV4cGxvc2lvbikge1xuICAgICAgIGV4cGxvc2lvbi5hbmltYXRpb25zLmFkZCgnZXhwbG9zaW9uJyk7XG4gICB9KTtcblxuICAgIC8vIFRoZSBwbGF5ZXIncyBzaGlwXG4gICAgcGxheWVyID0gdGhpcy5hZGQuc3ByaXRlKDQwMCwgNTAwLCAnc2hpcCcpO1xuICAgIHRoaXMucGh5c2ljcy5hcmNhZGUuZW5hYmxlKHBsYXllcik7XG5cbiAgICAvLyBTZXQgc2hpcCBwaHlzaWNzXG4gICAgcGxheWVyLmJvZHlcbiAgICAgIC5tYXhWZWxvY2l0eS5zZXRUbyhzaGlwLm1heFNwZWVkLCBzaGlwLm1heFNwZWVkKTtcbiAgICBwbGF5ZXIuYm9keVxuICAgICAgLmRyYWcuc2V0VG8oc2hpcC5kcmFnLCBzaGlwLmRyYWcpO1xuICAgIHBsYXllci5hbmNob3Iuc2V0VG8oMC41LCAwLjUpO1xuXG4gICAgLy8gU2V0IHNoaXAgdHJhaWwgZW1pdHRlclxuICAgIHNoaXBUcmFpbCA9IHRoaXMuYWRkLmVtaXR0ZXIocGxheWVyLngsIHBsYXllci55ICsgNDAsIDQwMCk7XG4gICAgc2hpcFRyYWlsLndpZHRoID0gMTA7XG4gICAgc2hpcFRyYWlsLm1ha2VQYXJ0aWNsZXMoJ3BsYXNtYScpO1xuICAgIHNoaXBUcmFpbC5zZXRYU3BlZWQoMzAsIC0zMCk7XG4gICAgc2hpcFRyYWlsLnNldFlTcGVlZCgyMDAsIDE4MCk7XG4gICAgc2hpcFRyYWlsLnNldFJvdGF0aW9uKDUwLCAtNTApO1xuICAgIHNoaXBUcmFpbC5zZXRBbHBoYSgxLCAwLjAxLCA4MDApO1xuICAgIHNoaXBUcmFpbC5zZXRTY2FsZSgwLjA1LCAwLjQsIDAuMDUsIDAuNCwgMjAwMCwgUGhhc2VyLkVhc2luZy5RdWludGljLk91dCk7XG4gICAgc2hpcFRyYWlsLnN0YXJ0KGZhbHNlLCA1MDAwLCAxMCk7XG5cbiAgICAvLyBTZXQgY29udHJvbHNcbiAgICBjdXJzb3JzID0gdGhpcy5pbnB1dC5rZXlib2FyZC5jcmVhdGVDdXJzb3JLZXlzKCk7XG4gICAgZmlyZUJ1dHRvbiA9IHRoaXMuaW5wdXQua2V5Ym9hcmQuYWRkS2V5KFBoYXNlci5LZXlib2FyZC5TUEFDRUJBUik7XG5cbiAgICBmdW5jdGlvbiByYW5kb21JbnRlZ2VyRnJvbShtaW4sIG1heCkge1xuICAgICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4pICsgbWluICsgMSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGF1bmNoRHJvbmVTY291dHMocXVhbnRpdHkpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcXVhbnRpdHk7IGkrKykge1xuICAgICAgICBsYXVuY2hEcm9uZVNjb3V0KCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRW5lbXkgY3JlYXRpb24gZnVuY3Rpb25zXG4gICAgZnVuY3Rpb24gbGF1bmNoRHJvbmVTY291dCgpIHtcbiAgICAgIHZhciBtaW5TcGFjaW5nID0gMzAwO1xuICAgICAgdmFyIG1heFNwYWNpbmcgPSAzMDAwO1xuICAgICAgdmFyIGVuZW15U3BlZWQgPSAzMDA7XG5cbiAgICAgIHZhciBlbmVteSA9IGRyb25lU2NvdXRzLmdldEZpcnN0RXhpc3RzKGZhbHNlKTtcbiAgICAgIGlmIChlbmVteSkge1xuICAgICAgICBlbmVteS5yZXNldChyYW5kb21JbnRlZ2VyRnJvbSgwLCA2MDApLCAtMjApO1xuICAgICAgICBlbmVteS5ib2R5LnZlbG9jaXR5LnggPSByYW5kb21JbnRlZ2VyRnJvbSgtMzAwLCAzMDApO1xuICAgICAgICBlbmVteS5ib2R5LnZlbG9jaXR5LnkgPSBlbmVteVNwZWVkO1xuICAgICAgICBlbmVteS5ib2R5LmRyYWcueCA9IDEwMDtcbiAgICAgICAgXG4gICAgICAgIC8vIE1vcmUgYnJva2VuIGVuZW15IHRyYWlsIGNvZGUuXG4gICAgICAgIC8vIGVuZW15LnRyYWlsLnN0YXJ0KGZhbHNlLCA4MDAsIDEpO1xuXG4gICAgICAgIGVuZW15LnVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIC8vIGVuZW15LnRyYWlsLnggPSBlbmVteS54O1xuICAgICAgICAgIC8vIGVuZW15LnRyYWlsLnkgPSBlbmVteS55IC0gMTA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uKCkge1xuICAgIHN0YXJmaWVsZC50aWxlUG9zaXRpb24ueSArPSAyO1xuXG4gICAgdGhpcy5waHlzaWNzLmFyY2FkZS5vdmVybGFwKHBsYXllciwgZHJvbmVTY291dHMsIHNoaXBDb2xsaWRlLCBudWxsLCB0aGlzKTtcbiAgICB0aGlzLnBoeXNpY3MuYXJjYWRlLm92ZXJsYXAoYnVsbGV0cywgZHJvbmVTY291dHMsIHNoaXBDb2xsaWRlLCBudWxsLCB0aGlzKTtcblxuICAgIHBsYXllci5ib2R5LmFjY2VsZXJhdGlvbi54ID0gMDtcblxuICAgIGlmIChjdXJzb3JzLmxlZnQuaXNEb3duKSB7XG4gICAgICBwbGF5ZXIuYm9keS5hY2NlbGVyYXRpb24ueCA9IC1zaGlwLmFjY2VsZXJhdGlvbjtcbiAgICB9IGVsc2UgaWYgKGN1cnNvcnMucmlnaHQuaXNEb3duKSB7XG4gICAgICBwbGF5ZXIuYm9keS5hY2NlbGVyYXRpb24ueCA9IHNoaXAuYWNjZWxlcmF0aW9uO1xuICAgIH1cblxuICAgIGlmIChmaXJlQnV0dG9uLmlzRG93bikge1xuICAgICAgZmlyZUJ1bGxldCgpO1xuICAgIH1cblxuICAgIC8vIFRPRE86IFJlZmFjdG9yIHRvIGJlIERSWVxuICAgIGlmIChwbGF5ZXIueCA+IDc1MCkge1xuICAgICAgcGxheWVyLnggPSA3NTA7XG4gICAgICBwbGF5ZXIuYm9keS5hY2NlbGVyYXRpb24ueCA9IDA7XG4gICAgfVxuICAgIGlmIChwbGF5ZXIueCA8IDUwKSB7XG4gICAgICBwbGF5ZXIueCA9IDUwO1xuICAgICAgcGxheWVyLmJvZHkuYWNjZWxlcmF0aW9uLnggPSAwO1xuICAgIH1cblxuICAgIC8vIFNoaXAgYmFua2luZyBsb2dpY1xuICAgIC8vIFRPRE86IHB1dCB0aGlzIGluIHRoZSBzaGlwIG9iamVjdFxuICAgIGJhbmsgPSBwbGF5ZXIuYm9keS52ZWxvY2l0eS54IC8gc2hpcC5tYXhTcGVlZDtcbiAgICBwbGF5ZXIuc2NhbGUueCA9IDEgLSBNYXRoLmFicyhiYW5rKSAvIDQ7XG4gICAgcGxheWVyLmFuZ2xlID0gYmFuayAqIDU7XG5cbiAgICBzaGlwVHJhaWwueCA9IHBsYXllci54O1xuXG4gICAgZnVuY3Rpb24gZmlyZUJ1bGxldCgpIHtcblxuXG4gICAgICB2YXIgYnVsbGV0ID0gYnVsbGV0cy5nZXRGaXJzdEV4aXN0cyhmYWxzZSk7XG4gICAgICB2YXIgYnVsbGV0U3BlZWQgPSA0MDA7XG5cbiAgICAgIGlmIChidWxsZXRDb3VudGVyID4gZmlyaW5nU3BlZWQpIHtcblxuICAgICAgICBidWxsZXRDb3VudGVyID0gMDtcblxuICAgICAgICAvLyBCdWxsZXQgcGh5c2ljc1xuICAgICAgICBpZiAoYnVsbGV0KSB7XG4gICAgICAgICAgYnVsbGV0LnJlc2V0KHBsYXllci54LCBwbGF5ZXIueSAtIDI1KTtcblxuICAgICAgICAgIGJ1bGxldC5ib2R5LnZlbG9jaXR5LnkgPSAtMjAwO1xuICAgICAgICAgIGJ1bGxldC5ib2R5LnZlbG9jaXR5LnggKz0gcGxheWVyLmJvZHkudmVsb2NpdHkueCAvIDU7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJGaXJpbmcgYXR0ZW1wdFwiKTtcbiAgICAgICAgICAvLyBGaXJpbmcgc3BlZWQgbG9naWNcbiAgICAgICAgICAvLyBidWxsZXRUaW1lciA9IEdhbWUudGltZS5ub3cgKz0gZmlyaW5nRGVsYXk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGJ1bGxldENvdW50ZXIrKztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzaGlwQ29sbGlkZShwbGF5ZXIsIGVuZW15KXtcbiAgICAgIHZhciBleHBsb3Npb24gPSBleHBsb3Npb25zLmdldEZpcnN0RXhpc3RzKGZhbHNlKTtcbiAgICAgIGV4cGxvc2lvbi5yZXNldChlbmVteS5ib2R5LnggKyBlbmVteS5ib2R5LmhhbGZXaWR0aCwgZW5lbXkuYm9keS55ICsgZW5lbXkuYm9keS5oYWxmSGVpZ2h0KTtcbiAgICAgIGV4cGxvc2lvbi5ib2R5LnZlbG9jaXR5LnkgPSBlbmVteS5ib2R5LnZlbG9jaXR5Lnk7XG4gICAgICBleHBsb3Npb24uYWxwaGEgPSAwLjc7XG4gICAgICBleHBsb3Npb24ucGxheSgnZXhwbG9zaW9uJywgMzAsIGZhbHNlLCB0cnVlKTtcbiAgICAgIGVuZW15LmtpbGwoKTtcbiAgICB9XG5cbiAgfSxcblxuICBvbklucHV0RG93bjogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5nYW1lLnN0YXRlLnN0YXJ0KCdNZW51Jyk7XG4gIH1cbn07IiwidmFyIE1lbnUgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMudGV4dCA9IG51bGw7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IE1lbnU7XG5cbk1lbnUucHJvdG90eXBlID0ge1xuXG4gIGNyZWF0ZTogZnVuY3Rpb24gKCkge1xuICAgIHZhciB4ID0gdGhpcy5nYW1lLndpZHRoIC8gMjtcbiAgICB2YXIgeSA9IHRoaXMuZ2FtZS5oZWlnaHQgLyAyO1xuXG4gICAgdmFyIHN0eWxlID0geyBmb250OiBcIjY1cHggQXJpYWxcIiwgZmlsbDogXCIjZmZmZmZmXCIsIGFsaWduOiBcImNlbnRlclwiIH07XG5cbiAgICB0aGlzLnRleHQgPSB0aGlzLmFkZC50ZXh0KHggLSAzMDAsIHkgLSAyMDAsIFwiUHJlc3MgdG8gU3RhcnRcIiwgc3R5bGUpO1xuXG4gICAgdGhpcy5pbnB1dC5vbkRvd24uYWRkKHRoaXMub25Eb3duLCB0aGlzKTtcbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uICgpIHtcbiAgfSxcblxuICBvbkRvd246IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmdhbWUuc3RhdGUuc3RhcnQocGxheWVyU3RhdGUuY3VycmVudExldmVsKTtcbiAgfVxufTtcbiIsInZhciBQcmVsb2FkZXIgPSBmdW5jdGlvbiAoZ2FtZSkge1xuICB0aGlzLmFzc2V0ID0gbnVsbDtcbiAgdGhpcy5yZWFkeSA9IGZhbHNlO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBQcmVsb2FkZXI7XG5cblxuUHJlbG9hZGVyLnByb3RvdHlwZSA9IHtcblxuICBwcmVsb2FkOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5hc3NldCA9IHRoaXMuYWRkLnNwcml0ZSgzMjAsIDI0MCwgJ3ByZWxvYWRlcicpO1xuICAgIHRoaXMuYXNzZXQuYW5jaG9yLnNldFRvKDAuNSwgMC41KTtcblxuICAgIHRoaXMucGh5c2ljcy5zdGFydFN5c3RlbShQaGFzZXIuUGh5c2ljcy5BUkNBREUpO1xuXG4gICAgdGhpcy5sb2FkLm9uTG9hZENvbXBsZXRlLmFkZE9uY2UodGhpcy5vbkxvYWRDb21wbGV0ZSwgdGhpcyk7XG4gICAgdGhpcy5sb2FkLnNldFByZWxvYWRTcHJpdGUodGhpcy5hc3NldCk7XG4gICAgdGhpcy5sb2FkLmltYWdlKCdzdGFyZmllbGQnLCAnYXNzZXRzL3N0YXJmaWVsZC5wbmcnKTtcbiAgICB0aGlzLmxvYWQuaW1hZ2UoJ3NoaXAnLCAnYXNzZXRzL3BsYXllci5wbmcnKTtcbiAgICB0aGlzLmxvYWQuaW1hZ2UoJ3BsYXNtYScsICdhc3NldHMvYmx1ZVBsYXNtYS5wbmcnKTtcbiAgICB0aGlzLmxvYWQuaW1hZ2UoJ2xhc2VyJywgJ2Fzc2V0cy9ibHVlTGFzZXIucG5nJyk7XG4gICAgdGhpcy5sb2FkLmltYWdlKCdidWxsZXQnLCAnYXNzZXRzL2JsdWVCdWxsZXQucG5nJyk7XG4gICAgdGhpcy5sb2FkLmltYWdlKCdkcm9uZVNjb3V0JywgJ2Fzc2V0cy9kcm9uZVNjb3V0LnBuZycpO1xuICAgIHRoaXMubG9hZC5pbWFnZSgnZW5lbXlUcmFpbCcsICdhc3NldHMvZW5lbXlUcmFpbC5wbmcnKTtcbiAgICB0aGlzLmxvYWQuc3ByaXRlc2hlZXQoJ2V4cGxvc2lvbicsICdhc3NldHMvZXhwbG9zaW9uLnBuZycsIDEyOCwgMTI4KTtcbiAgfSxcblxuICBjcmVhdGU6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmFzc2V0LmNyb3BFbmFibGVkID0gZmFsc2U7XG4gIH0sXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCEhdGhpcy5yZWFkeSkge1xuICAgICAgdGhpcy5nYW1lLnN0YXRlLnN0YXJ0KCdNZW51Jyk7XG4gICAgfVxuICB9LFxuXG4gIG9uTG9hZENvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5yZWFkeSA9IHRydWU7XG4gIH1cbn07XG4iLCJ2YXIgU3BsYXNoID0gZnVuY3Rpb24gKCkge1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBTcGxhc2g7XG5cblNwbGFzaC5wcm90b3R5cGUgPSB7XG4gIGNyZWF0ZTogZnVuY3Rpb24gKCkge1xuICB9XG59OyIsInZhciBVdGlscyA9IHtcbiAgICBjb250YWluc09iamVjdDogZnVuY3Rpb24ob2JqLCBsaXN0KSB7XG4gICAgICAgIHZhciBpO1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGxpc3RbaV0gPT09IG9iaikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gVXRpbHM7Il19
